{{ define "main" }}
<div class="jt-article" role="main">  
  <article role="main" class="blog-post">
    {{ .Content }}
  </article>
  {{ if (.Params.comments) | or (and (or (not (isset .Params "comments")) (eq .Params.comments nil)) (and .Site.Params.comments (ne .Type "page"))) }}
    {{ if .Site.DisqusShortname }}
      {{ if .Site.Params.delayDisqus }}
      <div class="jt-disqus-comments">                  
        <button onclick="jtBlogMain.showComments(event, {{ .Site.DisqusShortname }})">
          {{ i18n "show" }} 
          <span class="disqus-comment-count" data-disqus-url="{{ trim .Permalink "/" }}">{{ i18n "comments" }}</span>
        </button>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_config = function () {
          this.page.url = '{{ trim .Permalink "/" }}';
        };
      </script>
      </div>
      {{ else }}
      <div class="jt-disqus-comments">
        {{ template "_internal/disqus.html" . }}
      </div>
      {{ end }}
    {{ end }}
  {{ end }}
</div>
{{ end }}
